import os
import subprocess

def manage_waybar():
    cmd_check = "ps aux | grep 'waybar' | grep -v grep | grep -v waybar-toggle"
    result = os.popen(cmd_check)
    res = result.read()
    print(res)

    if 'waybar' in res: 
        print("'waybar' is running, killing it...")
        os.system("pkill waybar")
    else:
        print("'waybar' is not running, starting it...")
        process = subprocess.Popen(["waybar"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        process.communicate()  # 获取输出和错误信息

manage_waybar()
